{"remainingRequest":"/Users/LucaRaveri/Desktop/pweb00/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/LucaRaveri/Desktop/pweb00/src/views/EditJourney.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/LucaRaveri/Desktop/pweb00/src/views/EditJourney.vue","mtime":1643197557133},{"path":"/Users/LucaRaveri/Desktop/pweb00/node_modules/cache-loader/dist/cjs.js","mtime":1640341091566},{"path":"/Users/LucaRaveri/Desktop/pweb00/node_modules/babel-loader/lib/index.js","mtime":1640341097438},{"path":"/Users/LucaRaveri/Desktop/pweb00/node_modules/cache-loader/dist/cjs.js","mtime":1640341091566},{"path":"/Users/LucaRaveri/Desktop/pweb00/node_modules/vue-loader/lib/index.js","mtime":1640341101992}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CgogIG5hbWU6ICJFZGl0Sm91cm5leSIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aWFnZ2k6IFtdLAogICAgICBzZWxlY3RlZElkOiAiIiwKICAgICAgc2VsZWN0ZWREYXRhOiAiIiwKICAgICAgc2VsZWN0ZWRNZXp6bzogIiIsCiAgICAgIHNlbGVjdGVkVGFwcGU6ICIiLAogICAgICBzZWxlY3RlZFBlcmNvcnNvOiAiIiwKICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGF4aW9zCiAgICAgIC5nZXQoYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElST09UfWApCiAgICAgIC50aGVuKHJlc3BvbnNlID0+ICh0aGlzLnZpYWdnaSA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpOwogIH0sCiAgbWV0aG9kczogewogICAgc2V0Sm91cm5leTogZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkSm91cm5leSA9IHRoaXMudmlhZ2dpW2luZGV4XTsKICAgICAgdGhpcy5zZWxlY3RlZElkID0gc2VsZWN0ZWRKb3VybmV5LmlkOwogICAgICB0aGlzLnNlbGVjdGVkRGF0YSA9IHNlbGVjdGVkSm91cm5leS5kYXRhOwogICAgICB0aGlzLnNlbGVjdGVkTWV6em8gPSBzZWxlY3RlZEpvdXJuZXkubWV6em87CiAgICAgIHRoaXMuc2VsZWN0ZWRUYXBwZSA9IHNlbGVjdGVkSm91cm5leS50YXBwZTsKICAgICAgdGhpcy5zZWxlY3RlZFBlcmNvcnNvID0gc2VsZWN0ZWRKb3VybmV5LnBlcmNvcnNvOwogICAgfSwKCiAgICBlZGl0Sm91cm5leTogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCBpZCA9IHRoaXMuc2VsZWN0ZWRJZDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuc2VsZWN0ZWREYXRhOwogICAgICBjb25zdCBtZXp6byA9IHRoaXMuc2VsZWN0ZWRNZXp6bzsKICAgICAgY29uc3QgdGFwcGUgPSB0aGlzLnNlbGVjdGVkVGFwcGU7CiAgICAgIGNvbnN0IHBlcmNvcnNvID0gdGhpcy5zZWxlY3RlZFBlcmNvcnNvOwogICAgICAvL3ZhciB1bmFtZSA9ICJNYXJjb1JhdmVyaSI7CiAgICAgIC8vdmFyIHBhc3MgPSAiTWFyY28iOwogICAgICBheGlvcwogICAgICAgIC5wdXQoYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElST09UfWAsIHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICBtZXp6bzogbWV6em8sCiAgICAgICAgICB0YXBwZTogdGFwcGUsCiAgICAgICAgICBwZXJjb3JzbzogcGVyY29yc28sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlc2V0VmFyaWFibGVzKCk7CiAgICAgICAgICBheGlvcwogICAgICAgICAgICAuZ2V0KGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUk9PVH1gKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiAodGhpcy52aWFnZ2kgPSByZXNwb25zZS5kYXRhKSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlZGl0Rm9ybSIpLnJlc2V0KCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpOwogICAgfSwKCiAgICByZXNldFZhcmlhYmxlczogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNlbGVjdGVkSWQgPSAiIjsKICAgICAgdGhpcy5zZWxlY3RlZERhdGEgPSAiIjsKICAgICAgdGhpcy5zZWxlY3RlZE1lenpvID0gIiI7CiAgICAgIHRoaXMuc2VsZWN0ZWRUYXBwZSA9ICIiOwogICAgICB0aGlzLnNlbGVjdGVkUGVyY29yc28gPSAiIjsKICAgIH0sCgogICAgLy8gc2V0Sm91cm5leTogZnVuY3Rpb24gKGpvdXJuZXlJZCkgewogICAgLy8gICBjb25zb2xlLmxvZyhqb3VybmV5SWQpOwogICAgLy8gICBjb25zdCBzZWxlY3RlZEpvdXJuZXkgPSB0aGlzLnZpYWdnaS5maW5kKAogICAgLy8gICAgIHZpYWdnaW8gPT4gdmlhZ2dpby5faWQucmFuZG9tVmFsdWUxID09PSBqb3VybmV5SWQKICAgIC8vICAgKTsKICAgIC8vICAgY29uc29sZS5sb2coc2VsZWN0ZWRKb3VybmV5KTsKICAgIC8vICAgdGhpcy5zZWxlY3RlZERhdGEgPSBzZWxlY3RlZEpvdXJuZXkuZGF0YTsKICAgIC8vICAgdGhpcy5zZWxlY3RlZE1lenpvID0gc2VsZWN0ZWRKb3VybmV5Lm1lenpvOwogICAgLy8gICB0aGlzLnNlbGVjdGVkVGFwcGUgPSBzZWxlY3RlZEpvdXJuZXkudGFwcGU7CiAgICAvLyB9LAogIH0sCn07Cg=="},{"version":3,"sources":["EditJourney.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditJourney.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <form id=\"editForm\" class=\"m-3 border rounded p-5\">\n      <h1 class=\"mb-3\" style=\"text-align: center\">Modifica viaggio</h1>\n      <select\n        class=\"form-select mb-3\"\n        @change=\"setJourney($event.target.value)\"\n      >\n        <option disabled selected value>-- Seleziona viaggio --</option>\n        <option v-for=\"(viaggio, index) in viaggi\" :key=\"index\" :value=\"index\">\n          {{ viaggio.data }} - {{ viaggio.mezzo }} - {{ viaggio.tappe }}\n        </option>\n        <!-- <option\n          v-for=\"viaggio in viaggi\"\n          :key=\"viaggio._id\"\n          :value=\"viaggio._id.randomValue1\"\n        >\n          {{ viaggio.data }} - {{ viaggio.mezzo }} - {{ viaggio.tappe }}\n        </option> -->\n      </select>\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Data</label>\n        <input type=\"date\" class=\"form-control\" v-model=\"selectedData\" />\n      </div>\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Mezzo</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"selectedMezzo\" />\n      </div>\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Tappe principali</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"selectedTappe\" />\n      </div>\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Percorso (in formato GeoJSON)</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"selectedPercorso\" />\n      </div>\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary\"\n        @click.prevent=\"editJourney\"\n        style=\"width: 100%\"\n      >\n        Inserisci\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n\n  name: \"EditJourney\",\n\n  data() {\n    return {\n      viaggi: [],\n      selectedId: \"\",\n      selectedData: \"\",\n      selectedMezzo: \"\",\n      selectedTappe: \"\",\n      selectedPercorso: \"\",\n    };\n  },\n\n  created() {\n    axios\n      .get(`${process.env.VUE_APP_APIROOT}`)\n      .then(response => (this.viaggi = response.data))\n      .catch(error => console.error(error));\n  },\n  methods: {\n    setJourney: function (index) {\n      const selectedJourney = this.viaggi[index];\n      this.selectedId = selectedJourney.id;\n      this.selectedData = selectedJourney.data;\n      this.selectedMezzo = selectedJourney.mezzo;\n      this.selectedTappe = selectedJourney.tappe;\n      this.selectedPercorso = selectedJourney.percorso;\n    },\n\n    editJourney: function () {\n      const id = this.selectedId;\n      const data = this.selectedData;\n      const mezzo = this.selectedMezzo;\n      const tappe = this.selectedTappe;\n      const percorso = this.selectedPercorso;\n      //var uname = \"MarcoRaveri\";\n      //var pass = \"Marco\";\n      axios\n        .put(`${process.env.VUE_APP_APIROOT}`, {\n          id: id,\n          data: data,\n          mezzo: mezzo,\n          tappe: tappe,\n          percorso: percorso,\n        })\n        .then(() => {\n          this.resetVariables();\n          axios\n            .get(`${process.env.VUE_APP_APIROOT}`)\n            .then(response => (this.viaggi = response.data))\n            .catch(error => console.error(error));\n          document.getElementById(\"editForm\").reset();\n        })\n        .catch(error => console.error(error));\n    },\n\n    resetVariables: function () {\n      this.selectedId = \"\";\n      this.selectedData = \"\";\n      this.selectedMezzo = \"\";\n      this.selectedTappe = \"\";\n      this.selectedPercorso = \"\";\n    },\n\n    // setJourney: function (journeyId) {\n    //   console.log(journeyId);\n    //   const selectedJourney = this.viaggi.find(\n    //     viaggio => viaggio._id.randomValue1 === journeyId\n    //   );\n    //   console.log(selectedJourney);\n    //   this.selectedData = selectedJourney.data;\n    //   this.selectedMezzo = selectedJourney.mezzo;\n    //   this.selectedTappe = selectedJourney.tappe;\n    // },\n  },\n};\n</script>\n\n<style></style>\n"]}]}